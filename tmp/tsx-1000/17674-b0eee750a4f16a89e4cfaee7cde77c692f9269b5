{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});class LocalLlamaCppClient{constructor(config,logger){this.config=config;this.logger=logger}static{__name(this,\"LocalLlamaCppClient\")}async generate(messages){const url=new URL(\"/v1/chat/completions\",this.config.local.llamaServerUrl);let response;try{response=await fetch(url,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({model:this.config.local.model??\"local\",temperature:this.config.local.temperature,max_tokens:256,messages})})}catch(err){throw new Error(`Unable to reach llama-server at ${this.config.local.llamaServerUrl}. Start llama-server first.`)}if(!response.ok){const body=await response.text();throw new Error(`llama.cpp server error: ${response.status} ${body}`)}const data=await response.json();const content=data.choices?.[0]?.message?.content?.trim();if(!content){this.logger.warn({data},\"Empty response from llama.cpp\");return\"\"}return content}}export{LocalLlamaCppClient};\n","warnings":[],"map":{"version":3,"mappings":"kHAQO,MAAM,mBAAyC,CACpD,YAAoB,OAA2B,OAAgB,CAA3C,mBAA2B,kBAAiB,CATlE,MAQsD,oCAGpD,MAAM,SAAS,SAA0C,CACvD,MAAM,IAAM,IAAI,IAAI,uBAAwB,KAAK,OAAO,MAAM,cAAc,EAE5E,IAAI,SACJ,GAAI,CACF,SAAW,MAAM,MAAM,IAAK,CAC1B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAmB,EAC9C,KAAM,KAAK,UAAU,CACnB,MAAO,KAAK,OAAO,MAAM,OAAS,QAClC,YAAa,KAAK,OAAO,MAAM,YAC/B,WAAY,IACZ,QACF,CAAC,CACH,CAAC,CACH,OAAS,IAAK,CACZ,MAAM,IAAI,MACR,mCAAmC,KAAK,OAAO,MAAM,cAAc,6BACrE,CACF,CAEA,GAAI,CAAC,SAAS,GAAI,CAChB,MAAM,KAAO,MAAM,SAAS,KAAK,EACjC,MAAM,IAAI,MAAM,2BAA2B,SAAS,MAAM,IAAI,IAAI,EAAE,CACtE,CAEA,MAAM,KAAQ,MAAM,SAAS,KAAK,EAClC,MAAM,QAAU,KAAK,UAAU,CAAC,GAAG,SAAS,SAAS,KAAK,EAC1D,GAAI,CAAC,QAAS,CACZ,KAAK,OAAO,KAAK,CAAE,IAAK,EAAG,+BAA+B,EAC1D,MAAO,EACT,CACA,OAAO,OACT,CACF","names":[],"ignoreList":[],"sources":["/home/pi/aceceed-edge/apps/src/llm/localLlamaCpp.ts"],"sourcesContent":[null]}}